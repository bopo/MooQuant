

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>基础 API &mdash; MooQuant 0.2.1 文档</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="索引"
              href="../genindex.html"/>
        <link rel="search" title="搜索" href="../search.html"/>
    <link rel="top" title="MooQuant 0.2.1 文档" href="../index.html"/>
        <link rel="next" title="扩展 API" href="extend_api.html"/>
        <link rel="prev" title="环境搭建" href="../intro/detail_install.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> MooQuant
          

          
          </a>

          
            
            
              <div class="version">
                0.2.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">基础</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/overview.html">基本介绍</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/install.html">安装指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/tutorial.html">入门教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/examples.html">策略示例</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/detail_install.html">环境搭建</a></li>
</ul>
<p class="caption"><span class="caption-text">API</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">基础 API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">基本方法</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#init">init</a></li>
<li class="toctree-l3"><a class="reference internal" href="#handle-bar">handle_bar</a></li>
<li class="toctree-l3"><a class="reference internal" href="#before-trading">before_trading</a></li>
<li class="toctree-l3"><a class="reference internal" href="#after-trading">after_trading</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-mooquant.api">交易相关函数</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#order">🆕 order - 智能下单「通用」</a></li>
<li class="toctree-l3"><a class="reference internal" href="#order-to">🆕 order_to - 智能下单「通用」</a></li>
<li class="toctree-l3"><a class="reference internal" href="#order-shares">order_shares - 指定股数交易「股票专用」</a></li>
<li class="toctree-l3"><a class="reference internal" href="#order-lots">order_lots - 指定手数交易「股票专用」</a></li>
<li class="toctree-l3"><a class="reference internal" href="#order-value">order_value - 指定价值交易「股票专用」</a></li>
<li class="toctree-l3"><a class="reference internal" href="#order-percent">order_percent - 一定比例下单「股票专用」</a></li>
<li class="toctree-l3"><a class="reference internal" href="#order-target-value">order_target_value - 目标价值下单「股票专用」</a></li>
<li class="toctree-l3"><a class="reference internal" href="#order-target-percent">order_target_percent - 目标比例下单「股票专用」</a></li>
<li class="toctree-l3"><a class="reference internal" href="#buy-open">buy_open - 买开「期货专用」</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sell-close">sell_close - 平买仓「期货专用」</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sell-open">sell_open - 卖开「期货专用」</a></li>
<li class="toctree-l3"><a class="reference internal" href="#buy-close">buy_close - 平卖仓「期货专用」</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cancel-order">cancel_order - 撤单</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-open-orders">get_open_orders - 获取未成交订单数据</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#scheduler">scheduler定时器</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#scheduler-run-daily">scheduler.run_daily - 每天运行</a></li>
<li class="toctree-l3"><a class="reference internal" href="#scheduler-run-weekly">scheduler.run_weekly - 每周运行</a></li>
<li class="toctree-l3"><a class="reference internal" href="#scheduler-run-monthly">scheduler.run_monthly - 每月运行</a></li>
<li class="toctree-l3"><a class="reference internal" href="#time-rule">time_rule - 定时间运行</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id3">数据查询相关函数</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#all-instruments">all_instruments - 所有合约基础信息</a></li>
<li class="toctree-l3"><a class="reference internal" href="#instruments">instruments - 合约详细信息</a></li>
<li class="toctree-l3"><a class="reference internal" href="#industry">industry - 行业股票列表</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sector">sector - 板块股票列表</a></li>
<li class="toctree-l3"><a class="reference internal" href="#concept">concept - 概念股票列表</a></li>
<li class="toctree-l3"><a class="reference internal" href="#history-bars">history_bars - 某一合约历史数据</a></li>
<li class="toctree-l3"><a class="reference internal" href="#current-snapshot">current_snapshot - 当前快照数据</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-future-contracts">get_future_contracts - 期货可交易合约列表</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-trading-dates">get_trading_dates - 交易日列表</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-previous-trading-date">get_previous_trading_date - 上一交易日</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-next-trading-date">get_next_trading_date - 下一交易日</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-yield-curve">get_yield_curve - 收益率曲线</a></li>
<li class="toctree-l3"><a class="reference internal" href="#is-suspended">is_suspended - 全天停牌判断</a></li>
<li class="toctree-l3"><a class="reference internal" href="#is-st-stock-st">is_st_stock - ST股判断</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id5">其他方法</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#update-universe">update_universe</a></li>
<li class="toctree-l3"><a class="reference internal" href="#subscribe">subscribe</a></li>
<li class="toctree-l3"><a class="reference internal" href="#unsubscribe">unsubscribe</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-mooquant.core.strategy_context">Context属性</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id6">类</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-mooquant.model.bar">Bar</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-mooquant.model.snapshot">Snapshot</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-mooquant.model.order">Order</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-mooquant.model.portfolio">Portfolio</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-mooquant.mod.mooquant_mod_sys_accounts.account_model.stock_account">StockAccount</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-mooquant.mod.mooquant_mod_sys_accounts.account_model.future_account">FutureAccount</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-mooquant.mod.mooquant_mod_sys_accounts.position_model.stock_position">StockPosition</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-mooquant.mod.mooquant_mod_sys_accounts.position_model.future_position">FuturePosition</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-mooquant.model">Instrument</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id8">枚举常量</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#order-status">ORDER_STATUS - 订单状态</a></li>
<li class="toctree-l3"><a class="reference internal" href="#side">SIDE - 买卖方向</a></li>
<li class="toctree-l3"><a class="reference internal" href="#position-effect">POSITION_EFFECT - 开平</a></li>
<li class="toctree-l3"><a class="reference internal" href="#order-type">ORDER_TYPE - 订单类型</a></li>
<li class="toctree-l3"><a class="reference internal" href="#run-type">RUN_TYPE - 策略运行类型</a></li>
<li class="toctree-l3"><a class="reference internal" href="#matching-type">MATCHING_TYPE - 撮合方式</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="extend_api.html">扩展 API</a></li>
</ul>
<p class="caption"><span class="caption-text">进阶</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/run_algorithm.html">多种方式运行策略</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/under_ide.html">通过 PyCharm 运行/调试</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/optimizing_parameters.html">参数调优</a></li>
</ul>
<p class="caption"><span class="caption-text">开发</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../development/make_contribute.html">如何贡献代码</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/basic_concept.html">基本概念</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/event_source.html">扩展事件源</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/data_source.html">扩展数据源</a></li>
</ul>
<p class="caption"><span class="caption-text">其他</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../history.html">更新记录</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MooQuant</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>基础 API</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/api/base_api.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

/* nice headers on first paragraph of info/warning boxes */
.admonition .first {
    margin: -12px;
    padding: 6px 12px;
    margin-bottom: 12px;
    color: #fff;
    line-height: 1;
    display: block;
}
.admonition.warning .first {
    background: #f0b37e;
}
.admonition.note .first {
    background: #6ab0de;
}
.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}
</style>
<div class="section" id="api">
<span id="api-base-api"></span><h1>基础 API<a class="headerlink" href="#api" title="永久链接至标题">¶</a></h1>
<div class="section" id="id1">
<h2>基本方法<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h2>
<div class="section" id="init">
<h3>init<a class="headerlink" href="#init" title="永久链接至标题">¶</a></h3>
<dl class="function">
<dt>
<code class="descname">init</code><span class="sig-paren">(</span><em>context</em><span class="sig-paren">)</span></dt>
<dd><p>【必须实现】</p>
<p>初始化方法 - 在回测和实时模拟交易只会在启动的时候触发一次。你的算法会使用这个方法来设置你需要的各种初始化配置。 context 对象将会在你的算法的所有其他的方法之间进行传递以方便你可以拿取到。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>context</strong> (<code class="xref py py-class docutils literal"><span class="pre">StrategyContext</span></code> object) – 策略上下文</td>
</tr>
<tr class="field-even field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="n">context</span><span class="p">):</span>
    <span class="c1"># cash_limit的属性是根据用户需求自己定义的，你可以定义无限多种自己随后需要的属性，ricequant的系统默认只是会占用context.portfolio的关键字来调用策略的投资组合信息</span>
    <span class="n">context</span><span class="o">.</span><span class="n">cash_limit</span> <span class="o">=</span> <span class="mi">5000</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="handle-bar">
<h3>handle_bar<a class="headerlink" href="#handle-bar" title="永久链接至标题">¶</a></h3>
<dl class="function">
<dt id="handle_bar">
<code class="descname">handle_bar</code><span class="sig-paren">(</span><em>context</em>, <em>bar_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#handle_bar" title="永久链接至目标">¶</a></dt>
<dd><p>【必须实现】</p>
<p>bar数据的更新会自动触发该方法的调用。策略具体逻辑可在该方法内实现，包括交易信号的产生、订单的创建等。在实时模拟交易中，该函数在交易时间内会每分钟被触发一次。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>context</strong> (<code class="xref py py-class docutils literal"><span class="pre">StrategyContext</span></code> object) – 策略上下文</li>
<li><strong>bar_dict</strong> (<code class="xref py py-class docutils literal"><span class="pre">BarDict</span></code> object) – key为order_book_id，value为bar数据。当前合约池内所有合约的bar数据信息都会更新在bar_dict里面</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">handle_bar</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">bar_dict</span><span class="p">):</span>
    <span class="c1"># put all your algorithm main logic here.</span>
    <span class="c1"># ...</span>
    <span class="n">order_shares</span><span class="p">(</span><span class="s1">&#39;000001.XSHE&#39;</span><span class="p">,</span> <span class="mi">500</span><span class="p">)</span>
    <span class="c1"># ...</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="before-trading">
<h3>before_trading<a class="headerlink" href="#before-trading" title="永久链接至标题">¶</a></h3>
<dl class="function">
<dt id="before_trading">
<code class="descname">before_trading</code><span class="sig-paren">(</span><em>context</em><span class="sig-paren">)</span><a class="headerlink" href="#before_trading" title="永久链接至目标">¶</a></dt>
<dd><p>【选择实现】</p>
<p>每天在策略开始交易前会被调用。不能在这个函数中发送订单。需要注意，该函数的触发时间取决于用户当前所订阅合约的交易时间。</p>
<p>举例来说，如果用户订阅的合约中存在有夜盘交易的期货合约，则该函数可能会在前一日的20:00触发，而不是早晨08:00.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>context</strong> (<code class="xref py py-class docutils literal"><span class="pre">StrategyContext</span></code> object) – 策略上下文</td>
</tr>
<tr class="field-even field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">before_trading</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">bar_dict</span><span class="p">):</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;This is before trading&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="after-trading">
<h3>after_trading<a class="headerlink" href="#after-trading" title="永久链接至标题">¶</a></h3>
<dl class="function">
<dt id="after_trading">
<code class="descname">after_trading</code><span class="sig-paren">(</span><em>context</em><span class="sig-paren">)</span><a class="headerlink" href="#after_trading" title="永久链接至目标">¶</a></dt>
<dd><p>【选择实现】</p>
<p>每天在收盘后被调用。不能在这个函数中发送订单。您可以在该函数中进行当日收盘后的一些计算。</p>
<p>在实时模拟交易中，该函数会在每天15:30触发。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>context</strong> (<code class="xref py py-class docutils literal"><span class="pre">StrategyContext</span></code> object) – 策略上下文</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<div class="section" id="module-mooquant.api">
<span id="id2"></span><h2>交易相关函数<a class="headerlink" href="#module-mooquant.api" title="永久链接至标题">¶</a></h2>
<div class="section" id="order">
<h3>🆕 order - 智能下单「通用」<a class="headerlink" href="#order" title="永久链接至标题">¶</a></h3>
</div>
<div class="section" id="order-to">
<h3>🆕 order_to - 智能下单「通用」<a class="headerlink" href="#order-to" title="永久链接至标题">¶</a></h3>
</div>
<div class="section" id="order-shares">
<h3>order_shares - 指定股数交易「股票专用」<a class="headerlink" href="#order-shares" title="永久链接至标题">¶</a></h3>
</div>
<div class="section" id="order-lots">
<h3>order_lots - 指定手数交易「股票专用」<a class="headerlink" href="#order-lots" title="永久链接至标题">¶</a></h3>
</div>
<div class="section" id="order-value">
<h3>order_value - 指定价值交易「股票专用」<a class="headerlink" href="#order-value" title="永久链接至标题">¶</a></h3>
</div>
<div class="section" id="order-percent">
<h3>order_percent - 一定比例下单「股票专用」<a class="headerlink" href="#order-percent" title="永久链接至标题">¶</a></h3>
</div>
<div class="section" id="order-target-value">
<h3>order_target_value - 目标价值下单「股票专用」<a class="headerlink" href="#order-target-value" title="永久链接至标题">¶</a></h3>
</div>
<div class="section" id="order-target-percent">
<h3>order_target_percent - 目标比例下单「股票专用」<a class="headerlink" href="#order-target-percent" title="永久链接至标题">¶</a></h3>
</div>
<div class="section" id="buy-open">
<h3>buy_open - 买开「期货专用」<a class="headerlink" href="#buy-open" title="永久链接至标题">¶</a></h3>
</div>
<div class="section" id="sell-close">
<h3>sell_close - 平买仓「期货专用」<a class="headerlink" href="#sell-close" title="永久链接至标题">¶</a></h3>
</div>
<div class="section" id="sell-open">
<h3>sell_open - 卖开「期货专用」<a class="headerlink" href="#sell-open" title="永久链接至标题">¶</a></h3>
</div>
<div class="section" id="buy-close">
<h3>buy_close - 平卖仓「期货专用」<a class="headerlink" href="#buy-close" title="永久链接至标题">¶</a></h3>
</div>
<div class="section" id="cancel-order">
<h3>cancel_order - 撤单<a class="headerlink" href="#cancel-order" title="永久链接至标题">¶</a></h3>
</div>
<div class="section" id="get-open-orders">
<h3>get_open_orders - 获取未成交订单数据<a class="headerlink" href="#get-open-orders" title="永久链接至标题">¶</a></h3>
</div>
</div>
<div class="section" id="scheduler">
<h2>scheduler定时器<a class="headerlink" href="#scheduler" title="永久链接至标题">¶</a></h2>
<div class="section" id="scheduler-run-daily">
<h3>scheduler.run_daily - 每天运行<a class="headerlink" href="#scheduler-run-daily" title="永久链接至标题">¶</a></h3>
<dl class="function">
<dt id="mooquant.api.scheduler.run_daily">
<code class="descclassname">scheduler.</code><code class="descname">run_daily</code><span class="sig-paren">(</span><em>function</em><span class="sig-paren">)</span><a class="headerlink" href="#mooquant.api.scheduler.run_daily" title="永久链接至目标">¶</a></dt>
<dd><p>每日运行一次指定的函数，只能在init内使用。</p>
<p>注意，schedule一定在其对应时间点的handle_bar之后执行。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>function</strong> (<em>func</em>) – 使传入的function每日运行。注意，function函数一定要包含（并且只能包含）context, bar_dict两个输入参数</td>
</tr>
<tr class="field-even field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<p>以下的范例代码片段是一个非常简单的例子，在每天交易后查询现在portfolio中剩下的cash的情况:</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#scheduler调用的函数需要包括context, bar_dict两个输入参数</span>
<span class="k">def</span> <span class="nf">log_cash</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">bar_dict</span><span class="p">):</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Remaning cash: </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">context</span><span class="o">.</span><span class="n">portfolio</span><span class="o">.</span><span class="n">cash</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="n">context</span><span class="p">):</span>
    <span class="c1">#...</span>
    <span class="c1"># 每天运行一次</span>
    <span class="n">scheduler</span><span class="o">.</span><span class="n">run_daily</span><span class="p">(</span><span class="n">log_cash</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

</div>
<div class="section" id="scheduler-run-weekly">
<h3>scheduler.run_weekly - 每周运行<a class="headerlink" href="#scheduler-run-weekly" title="永久链接至标题">¶</a></h3>
<dl class="function">
<dt id="mooquant.api.scheduler.run_weekly">
<code class="descclassname">scheduler.</code><code class="descname">run_weekly</code><span class="sig-paren">(</span><em>function</em>, <em>weekday=x</em>, <em>tradingday=t</em><span class="sig-paren">)</span><a class="headerlink" href="#mooquant.api.scheduler.run_weekly" title="永久链接至目标">¶</a></dt>
<dd><p>每周运行一次指定的函数，只能在init内使用。</p>
<p>注意：</p>
<ul class="simple">
<li>tradingday中的负数表示倒数。</li>
<li>tradingday表示交易日。如某周只有四个交易日，则此周的tradingday=4与tradingday=-1表示同一天。</li>
<li>weekday和tradingday不能同时使用。</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>function</strong> (<em>func</em>) – 使传入的function每日交易开始前运行。注意，function函数一定要包含（并且只能包含）context, bar_dict两个输入参数。</li>
<li><strong>weekday</strong> (<em>int</em>) – 1~5 分别代表周一至周五，用户必须指定</li>
<li><strong>tradingday</strong> (<em>int</em>) – 范围为[-5,1],[1,5] 例如，1代表每周第一个交易日，-1代表每周倒数第一个交易日，用户可以不填写。</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<p>以下的代码片段非常简单，在每周二固定运行打印一下现在的portfolio剩余的资金:</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#scheduler调用的函数需要包括context, bar_dict两个参数</span>
<span class="k">def</span> <span class="nf">log_cash</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">bar_dict</span><span class="p">):</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Remaning cash: </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">context</span><span class="o">.</span><span class="n">portfolio</span><span class="o">.</span><span class="n">cash</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="n">context</span><span class="p">):</span>
    <span class="c1">#...</span>
    <span class="c1"># 每周二打印一下剩余资金：</span>
    <span class="n">scheduler</span><span class="o">.</span><span class="n">run_weekly</span><span class="p">(</span><span class="n">log_cash</span><span class="p">,</span> <span class="n">weekday</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="c1"># 每周第二个交易日打印剩余资金：</span>
    <span class="c1">#scheduler.run_weekly(log_cash, tradingday=2)</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

</div>
<div class="section" id="scheduler-run-monthly">
<h3>scheduler.run_monthly - 每月运行<a class="headerlink" href="#scheduler-run-monthly" title="永久链接至标题">¶</a></h3>
<dl class="function">
<dt id="mooquant.api.scheduler.run_monthly">
<code class="descclassname">scheduler.</code><code class="descname">run_monthly</code><span class="sig-paren">(</span><em>function</em>, <em>tradingday=t</em><span class="sig-paren">)</span><a class="headerlink" href="#mooquant.api.scheduler.run_monthly" title="永久链接至目标">¶</a></dt>
<dd><p>每月运行一次指定的函数，只能在init内使用。</p>
<p>注意:</p>
<ul class="simple">
<li>tradingday的负数表示倒数。</li>
<li>tradingday表示交易日，如某月只有三个交易日，则此月的tradingday=3与tradingday=-1表示同一。</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><ul class="first simple">
<li><strong>function</strong> (<em>func</em>) – 使传入的function每日交易开始前运行。注意，function函数一定要包含（并且只能包含）context, bar_dict两个输入参数。</li>
<li><strong>tradingday</strong> (<em>int</em>) – 范围为[-23,1], [1,23] ，例如，1代表每月第一个交易日，-1代表每月倒数第一个交易日，用户必须指定。</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<p>以下的代码片段非常简单的展示了每个月第一个交易日的时候我们进行一次财务数据查询，这样子会非常有用在一些根据财务数据来自动调节仓位股票组合的算法来说:</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#scheduler调用的函数需要包括context, bar_dict两个参数</span>
<span class="k">def</span> <span class="nf">query_fundamental</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">bar_dict</span><span class="p">):</span>
        <span class="c1"># 查询revenue前十名的公司的股票并且他们的pe_ratio在25和30之间。打fundamentals的时候会有auto-complete方便写查询代码。</span>
    <span class="n">fundamental_df</span> <span class="o">=</span> <span class="n">get_fundamentals</span><span class="p">(</span>
        <span class="n">query</span><span class="p">(</span>
            <span class="n">fundamentals</span><span class="o">.</span><span class="n">income_statement</span><span class="o">.</span><span class="n">revenue</span><span class="p">,</span> <span class="n">fundamentals</span><span class="o">.</span><span class="n">eod_derivative_indicator</span><span class="o">.</span><span class="n">pe_ratio</span>
        <span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
            <span class="n">fundamentals</span><span class="o">.</span><span class="n">eod_derivative_indicator</span><span class="o">.</span><span class="n">pe_ratio</span> <span class="o">&gt;</span> <span class="mi">25</span>
        <span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
            <span class="n">fundamentals</span><span class="o">.</span><span class="n">eod_derivative_indicator</span><span class="o">.</span><span class="n">pe_ratio</span> <span class="o">&lt;</span> <span class="mi">30</span>
        <span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span>
            <span class="n">fundamentals</span><span class="o">.</span><span class="n">income_statement</span><span class="o">.</span><span class="n">revenue</span><span class="o">.</span><span class="n">desc</span><span class="p">()</span>
        <span class="p">)</span><span class="o">.</span><span class="n">limit</span><span class="p">(</span>
            <span class="mi">10</span>
        <span class="p">)</span>
    <span class="p">)</span>

    <span class="c1"># 将查询结果dataframe的fundamental_df存放在context里面以备后面只需：</span>
    <span class="n">context</span><span class="o">.</span><span class="n">fundamental_df</span> <span class="o">=</span> <span class="n">fundamental_df</span>

    <span class="c1"># 实时打印日志看下查询结果，会有我们精心处理的数据表格显示：</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">fundamental_df</span><span class="p">)</span>
    <span class="n">update_universe</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">fundamental_df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>

 <span class="c1"># 在这个方法中编写任何的初始化逻辑。context对象将会在你的算法策略的任何方法之间做传递。</span>
<span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="n">context</span><span class="p">):</span>
    <span class="c1"># 每月的第一个交易日查询以下财务数据，以确保可以拿到最新更新的财务数据信息用来调整仓位</span>
    <span class="n">scheduler</span><span class="o">.</span><span class="n">run_monthly</span><span class="p">(</span><span class="n">query_fundamental</span><span class="p">,</span> <span class="n">tradingday</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

</div>
<div class="section" id="time-rule">
<h3>time_rule - 定时间运行<a class="headerlink" href="#time-rule" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>scheduler还可以用来做定时间运行，比如在每天开盘后的一小时后或一分钟后定时运行，这里有很多种组合可以让您达到各种自己想要达到的定时运行的目的。</p>
<p>使用的方法是和上面的 <a class="reference internal" href="#mooquant.api.scheduler.run_daily" title="mooquant.api.scheduler.run_daily"><code class="xref py py-func docutils literal"><span class="pre">scheduler.run_daily()</span></code></a> , <a class="reference internal" href="#mooquant.api.scheduler.run_weekly" title="mooquant.api.scheduler.run_weekly"><code class="xref py py-func docutils literal"><span class="pre">scheduler.run_weekly()</span></code></a> 和 <a class="reference internal" href="#mooquant.api.scheduler.run_monthly" title="mooquant.api.scheduler.run_monthly"><code class="xref py py-func docutils literal"><span class="pre">scheduler.run_monthly()</span></code></a> 进行组合加入time_rule来一起使用。</p>
<p>注意:</p>
<ul class="simple">
<li>market_open与market_close都跟随中国A股交易时间进行设置，即09:31~15:00。</li>
<li>使用time_rule定时运行只会在分钟级别回测和实时模拟交易中有定义的效果，在日回测中只会默认依然在该天运行，并不能在固定的时间运行。</li>
<li>在分钟回测中如未指定time_rule,则默认在开盘后一分钟运行,即09:31分。</li>
<li>如果两个schedule，分别使用market_open 与market_close规则，但规则触发时间在同一时刻，则market_open的handle一定在market_close的handle前执行。</li>
<li>目前暂不支持开盘交易(即 09:30分交易) ,所以time_rule(minute=0) 和time_rule(hour=0) 将不会触发任何事件。</li>
<li>market_open(minute=120)将在11:30执行， market_open(minute=121)在13:01执行，中午休市的区间会被忽略。</li>
<li>time_rule=’before_trading’表示在开市交易前运行scheduler函数。该函数运行时间将在before_trading函数运行完毕之后handle_bar运行之前。</li>
</ul>
<p><cite>time_rule</cite>: 定时具体几点几分运行某个函数。time_rule=’before_trading’ 表示开始交易前运行；market_open(hour=x, minute=y)表示A股市场开市后x小时y分钟运行，market_close(hour=x, minute=y)表示A股市场收市前x小时y分钟运行。如果不设置time_rule默认的值是中国A股市场开市后一分钟运行。</p>
<p>market_open, market_close参数如下：</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="13%" />
<col width="73%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">参数</th>
<th class="head">类型</th>
<th class="head">注释</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>hour</td>
<td>int - option [1,4]</td>
<td>具体在market_open/market_close后/前第多少小时执行, 股票的交易时间为[9:31 - 11:30],[13:01 - 15:00]共240分钟，所以hour的范围为 [1,4]</td>
</tr>
<tr class="row-odd"><td>minute</td>
<td>int - option [1,240]</td>
<td>具体在market_open/market_close的后/前第多少分钟执行,同上，股票每天交易时间240分钟，所以minute的范围为 [1,240],中午休市的时间区间会被忽略。</td>
</tr>
</tbody>
</table>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first">每天的开市后10分钟运行:</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">scheduler</span><span class="o">.</span><span class="n">run_daily</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">time_rule</span><span class="o">=</span><span class="n">market_open</span><span class="p">(</span><span class="n">minute</span><span class="o">=</span><span class="mi">10</span><span class="p">))</span>
</pre></div>
</td></tr></table></div>
</li>
<li><p class="first">每周的第t个交易日闭市前1小时运行:</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">scheduler</span><span class="o">.</span><span class="n">run_weekly</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">tradingday</span><span class="o">=</span><span class="n">t</span><span class="p">,</span> <span class="n">time_rule</span><span class="o">=</span><span class="n">market_close</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
</pre></div>
</td></tr></table></div>
</li>
<li><p class="first">每月的第t个交易日开市后1小时运行:</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">scheduler</span><span class="o">.</span><span class="n">run_monthly</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">tradingday</span><span class="o">=</span><span class="n">t</span><span class="p">,</span> <span class="n">time_rule</span><span class="o">=</span><span class="n">market_open</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
</pre></div>
</td></tr></table></div>
</li>
<li><p class="first">每天开始交易前运行:</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">scheduler</span><span class="o">.</span><span class="n">run_daily</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">time_rule</span><span class="o">=</span><span class="s1">&#39;before_trading&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="id3">
<h2>数据查询相关函数<a class="headerlink" href="#id3" title="永久链接至标题">¶</a></h2>
<div class="section" id="all-instruments">
<h3>all_instruments - 所有合约基础信息<a class="headerlink" href="#all-instruments" title="永久链接至标题">¶</a></h3>
</div>
<div class="section" id="instruments">
<h3>instruments - 合约详细信息<a class="headerlink" href="#instruments" title="永久链接至标题">¶</a></h3>
</div>
<div class="section" id="industry">
<h3>industry - 行业股票列表<a class="headerlink" href="#industry" title="永久链接至标题">¶</a></h3>
<dl class="function">
<dt id="mooquant.api.industry">
<code class="descclassname">mooquant.api.</code><code class="descname">industry</code><span class="sig-paren">(</span><em>industry_code</em><span class="sig-paren">)</span><a class="headerlink" href="#mooquant.api.industry" title="永久链接至目标">¶</a></dt>
<dd><p>获得属于某一行业的所有股票列表。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>industry_code</strong> (<em>str</em>) – 行业名称或行业代码。例如，农业可填写industry_code.A01 或 ‘A01’</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body">list of order_book_id 获得属于某一行业的所有股票</td>
</tr>
</tbody>
</table>
<p>我们目前使用的行业分类来自于中国国家统计局的 <a class="reference external" href="http://www.stats.gov.cn/tjsj/tjbz/hyflbz/">国民经济行业分类</a> ，可以使用这里的任何一个行业代码来调用行业的股票列表：</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">行业代码</th>
<th class="head">行业名称</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>A01</td>
<td>农业</td>
</tr>
<tr class="row-odd"><td>A02</td>
<td>林业</td>
</tr>
<tr class="row-even"><td>A03</td>
<td>畜牧业</td>
</tr>
<tr class="row-odd"><td>A04</td>
<td>渔业</td>
</tr>
<tr class="row-even"><td>A05</td>
<td>农、林、牧、渔服务业</td>
</tr>
<tr class="row-odd"><td>B06</td>
<td>煤炭开采和洗选业</td>
</tr>
<tr class="row-even"><td>B07</td>
<td>石油和天然气开采业</td>
</tr>
<tr class="row-odd"><td>B08</td>
<td>黑色金属矿采选业</td>
</tr>
<tr class="row-even"><td>B09</td>
<td>有色金属矿采选业</td>
</tr>
<tr class="row-odd"><td>B10</td>
<td>非金属矿采选业</td>
</tr>
<tr class="row-even"><td>B11</td>
<td>开采辅助活动</td>
</tr>
<tr class="row-odd"><td>B12</td>
<td>其他采矿业</td>
</tr>
<tr class="row-even"><td>C13</td>
<td>农副食品加工业</td>
</tr>
<tr class="row-odd"><td>C14</td>
<td>食品制造业</td>
</tr>
<tr class="row-even"><td>C15</td>
<td>酒、饮料和精制茶制造业</td>
</tr>
<tr class="row-odd"><td>C16</td>
<td>烟草制品业</td>
</tr>
<tr class="row-even"><td>C17</td>
<td>纺织业</td>
</tr>
<tr class="row-odd"><td>C18</td>
<td>纺织服装、服饰业</td>
</tr>
<tr class="row-even"><td>C19</td>
<td>皮革、毛皮、羽毛及其制品和制鞋业</td>
</tr>
<tr class="row-odd"><td>C20</td>
<td>木材加工及木、竹、藤、棕、草制品业</td>
</tr>
<tr class="row-even"><td>C21</td>
<td>家具制造业</td>
</tr>
<tr class="row-odd"><td>C22</td>
<td>造纸及纸制品业</td>
</tr>
<tr class="row-even"><td>C23</td>
<td>印刷和记录媒介复制业</td>
</tr>
<tr class="row-odd"><td>C24</td>
<td>文教、工美、体育和娱乐用品制造业</td>
</tr>
<tr class="row-even"><td>C25</td>
<td>石油加工、炼焦及核燃料加工业</td>
</tr>
<tr class="row-odd"><td>C26</td>
<td>化学原料及化学制品制造业</td>
</tr>
<tr class="row-even"><td>C27</td>
<td>医药制造业</td>
</tr>
<tr class="row-odd"><td>C28</td>
<td>化学纤维制造业</td>
</tr>
<tr class="row-even"><td>C29</td>
<td>橡胶和塑料制品业</td>
</tr>
<tr class="row-odd"><td>C30</td>
<td>非金属矿物制品业</td>
</tr>
<tr class="row-even"><td>C31</td>
<td>黑色金属冶炼及压延加工业</td>
</tr>
<tr class="row-odd"><td>C32</td>
<td>有色金属冶炼和压延加工业</td>
</tr>
<tr class="row-even"><td>C33</td>
<td>金属制品业</td>
</tr>
<tr class="row-odd"><td>C34</td>
<td>通用设备制造业</td>
</tr>
<tr class="row-even"><td>C35</td>
<td>专用设备制造业</td>
</tr>
<tr class="row-odd"><td>C36</td>
<td>汽车制造业</td>
</tr>
<tr class="row-even"><td>C37</td>
<td>铁路、船舶、航空航天和其它运输设备制造业</td>
</tr>
<tr class="row-odd"><td>C38</td>
<td>电气机械及器材制造业</td>
</tr>
<tr class="row-even"><td>C39</td>
<td>计算机、通信和其他电子设备制造业</td>
</tr>
<tr class="row-odd"><td>C40</td>
<td>仪器仪表制造业</td>
</tr>
<tr class="row-even"><td>C41</td>
<td>其他制造业</td>
</tr>
<tr class="row-odd"><td>C42</td>
<td>废弃资源综合利用业</td>
</tr>
<tr class="row-even"><td>C43</td>
<td>金属制品、机械和设备修理业</td>
</tr>
<tr class="row-odd"><td>D44</td>
<td>电力、热力生产和供应业</td>
</tr>
<tr class="row-even"><td>D45</td>
<td>燃气生产和供应业</td>
</tr>
<tr class="row-odd"><td>D46</td>
<td>水的生产和供应业</td>
</tr>
<tr class="row-even"><td>E47</td>
<td>房屋建筑业</td>
</tr>
<tr class="row-odd"><td>E48</td>
<td>土木工程建筑业</td>
</tr>
<tr class="row-even"><td>E49</td>
<td>建筑安装业</td>
</tr>
<tr class="row-odd"><td>E50</td>
<td>建筑装饰和其他建筑业</td>
</tr>
<tr class="row-even"><td>F51</td>
<td>批发业</td>
</tr>
<tr class="row-odd"><td>F52</td>
<td>零售业</td>
</tr>
<tr class="row-even"><td>G53</td>
<td>铁路运输业</td>
</tr>
<tr class="row-odd"><td>G54</td>
<td>道路运输业</td>
</tr>
<tr class="row-even"><td>G55</td>
<td>水上运输业</td>
</tr>
<tr class="row-odd"><td>G56</td>
<td>航空运输业</td>
</tr>
<tr class="row-even"><td>G57</td>
<td>管道运输业</td>
</tr>
<tr class="row-odd"><td>G58</td>
<td>装卸搬运和运输代理业</td>
</tr>
<tr class="row-even"><td>G59</td>
<td>仓储业</td>
</tr>
<tr class="row-odd"><td>G60</td>
<td>邮政业</td>
</tr>
<tr class="row-even"><td>H61</td>
<td>住宿业</td>
</tr>
<tr class="row-odd"><td>H62</td>
<td>餐饮业</td>
</tr>
<tr class="row-even"><td>I63</td>
<td>电信、广播电视和卫星传输服务</td>
</tr>
<tr class="row-odd"><td>I64</td>
<td>互联网和相关服务</td>
</tr>
<tr class="row-even"><td>I65</td>
<td>软件和信息技术服务业</td>
</tr>
<tr class="row-odd"><td>J66</td>
<td>货币金融服务</td>
</tr>
<tr class="row-even"><td>J67</td>
<td>资本市场服务</td>
</tr>
<tr class="row-odd"><td>J68</td>
<td>保险业</td>
</tr>
<tr class="row-even"><td>J69</td>
<td>其他金融业</td>
</tr>
<tr class="row-odd"><td>K70</td>
<td>房地产业</td>
</tr>
<tr class="row-even"><td>L71</td>
<td>租赁业</td>
</tr>
<tr class="row-odd"><td>L72</td>
<td>商务服务业</td>
</tr>
<tr class="row-even"><td>M73</td>
<td>研究和试验发展</td>
</tr>
<tr class="row-odd"><td>M74</td>
<td>专业技术服务业</td>
</tr>
<tr class="row-even"><td>M75</td>
<td>科技推广和应用服务业</td>
</tr>
<tr class="row-odd"><td>N76</td>
<td>水利管理业</td>
</tr>
<tr class="row-even"><td>N77</td>
<td>生态保护和环境治理业</td>
</tr>
<tr class="row-odd"><td>N78</td>
<td>公共设施管理业</td>
</tr>
<tr class="row-even"><td>O79</td>
<td>居民服务业</td>
</tr>
<tr class="row-odd"><td>O80</td>
<td>机动车、电子产品和日用产品修理业</td>
</tr>
<tr class="row-even"><td>O81</td>
<td>其他服务业</td>
</tr>
<tr class="row-odd"><td>P82</td>
<td>教育</td>
</tr>
<tr class="row-even"><td>Q83</td>
<td>卫生</td>
</tr>
<tr class="row-odd"><td>Q84</td>
<td>社会工作</td>
</tr>
<tr class="row-even"><td>R85</td>
<td>新闻和出版业</td>
</tr>
<tr class="row-odd"><td>R86</td>
<td>广播、电视、电影和影视录音制作业</td>
</tr>
<tr class="row-even"><td>R87</td>
<td>文化艺术业</td>
</tr>
<tr class="row-odd"><td>R88</td>
<td>体育</td>
</tr>
<tr class="row-even"><td>R89</td>
<td>娱乐业</td>
</tr>
<tr class="row-odd"><td>S90</td>
<td>综合</td>
</tr>
</tbody>
</table>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="n">context</span><span class="p">):</span>
    <span class="n">stock_list</span> <span class="o">=</span> <span class="n">industry</span><span class="p">(</span><span class="s1">&#39;A01&#39;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;农业股票列表：&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">stock_list</span><span class="p">))</span>

<span class="c1">#INITINFO 农业股票列表：[&#39;600354.XSHG&#39;, &#39;601118.XSHG&#39;, &#39;002772.XSHE&#39;, &#39;600371.XSHG&#39;, &#39;600313.XSHG&#39;, &#39;600672.XSHG&#39;, &#39;600359.XSHG&#39;, &#39;300143.XSHE&#39;, &#39;002041.XSHE&#39;, &#39;600762.XSHG&#39;, &#39;600540.XSHG&#39;, &#39;300189.XSHE&#39;, &#39;600108.XSHG&#39;, &#39;300087.XSHE&#39;, &#39;600598.XSHG&#39;, &#39;000998.XSHE&#39;, &#39;600506.XSHG&#39;]</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

</div>
<div class="section" id="sector">
<h3>sector - 板块股票列表<a class="headerlink" href="#sector" title="永久链接至标题">¶</a></h3>
<dl class="function">
<dt id="mooquant.api.sector">
<code class="descclassname">mooquant.api.</code><code class="descname">sector</code><span class="sig-paren">(</span><em>code</em><span class="sig-paren">)</span><a class="headerlink" href="#mooquant.api.sector" title="永久链接至目标">¶</a></dt>
<dd><p>获得属于某一板块的所有股票列表。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>code</strong> – 板块名称或板块代码。例如，能源板块可填写’Energy’、’能源’或sector_code.Energy
:type code: <cite>str</cite> | <cite>sector_code</cite></td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body">list of order_book_id 属于该板块的股票列表</td>
</tr>
</tbody>
</table>
<p>目前支持的板块分类如下，其取值参考自MSCI发布的全球行业标准分类:</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="20%" />
<col width="61%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">板块代码</th>
<th class="head">中文板块名称</th>
<th class="head">英文板块名称</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Energy</td>
<td>能源</td>
<td>energy</td>
</tr>
<tr class="row-odd"><td>Materials</td>
<td>原材料</td>
<td>materials</td>
</tr>
<tr class="row-even"><td>ConsumerDiscretionary</td>
<td>非必需消费品</td>
<td>consumer discretionary</td>
</tr>
<tr class="row-odd"><td>ConsumerStaples</td>
<td>必需消费品</td>
<td>consumer staples</td>
</tr>
<tr class="row-even"><td>HealthCare</td>
<td>医疗保健</td>
<td>health care</td>
</tr>
<tr class="row-odd"><td>Financials</td>
<td>金融</td>
<td>financials</td>
</tr>
<tr class="row-even"><td>InformationTechnology</td>
<td>信息技术</td>
<td>information technology</td>
</tr>
<tr class="row-odd"><td>TelecommunicationServices</td>
<td>电信服务</td>
<td>telecommunication services</td>
</tr>
<tr class="row-even"><td>Utilities</td>
<td>公共服务</td>
<td>utilities</td>
</tr>
<tr class="row-odd"><td>Industrials</td>
<td>工业</td>
<td>industrials</td>
</tr>
</tbody>
</table>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="n">context</span><span class="p">):</span>
    <span class="n">ids1</span> <span class="o">=</span> <span class="n">sector</span><span class="p">(</span><span class="s2">&quot;consumer discretionary&quot;</span><span class="p">)</span>
    <span class="n">ids2</span> <span class="o">=</span> <span class="n">sector</span><span class="p">(</span><span class="s2">&quot;非必需消费品&quot;</span><span class="p">)</span>
    <span class="n">ids3</span> <span class="o">=</span> <span class="n">sector</span><span class="p">(</span><span class="s2">&quot;ConsumerDiscretionary&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">ids1</span> <span class="o">==</span> <span class="n">ids2</span> <span class="ow">and</span> <span class="n">ids1</span> <span class="o">==</span> <span class="n">ids3</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">ids1</span><span class="p">)</span>
<span class="c1">#INIT INFO</span>
<span class="c1">#[&#39;002045.XSHE&#39;, &#39;603099.XSHG&#39;, &#39;002486.XSHE&#39;, &#39;002536.XSHE&#39;, &#39;300100.XSHE&#39;, &#39;600633.XSHG&#39;, &#39;002291.XSHE&#39;, ..., &#39;600233.XSHG&#39;]</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

</div>
<div class="section" id="concept">
<h3>concept - 概念股票列表<a class="headerlink" href="#concept" title="永久链接至标题">¶</a></h3>
<dl class="function">
<dt id="mooquant.api.concept">
<code class="descclassname">mooquant.api.</code><code class="descname">concept</code><span class="sig-paren">(</span><em>concept_name1</em>, <em>concept_name2</em>, <em>...</em><span class="sig-paren">)</span><a class="headerlink" href="#mooquant.api.concept" title="永久链接至目标">¶</a></dt>
<dd><p>获取属于某个或某几个概念的股票列表。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">参数:</th><td class="field-body"><strong>concept_names</strong> – 概念名称。可以从概念列表中选择一个或多个概念填写
:type concept_names: str | 多个 str</td>
</tr>
<tr class="field-even field"><th class="field-name">返回:</th><td class="field-body">属于该概念的股票 <cite>order_book_id</cite> 或者 list[<cite>order_book_id</cite>]</td>
</tr>
</tbody>
</table>
<p>概念列表:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">含H股</span>        <span class="n">深圳本地</span>        <span class="n">含B股</span>        <span class="n">农村金融</span>        <span class="n">东亚自贸</span>        <span class="n">海工装备</span>        <span class="n">绿色照明</span>        <span class="n">稀土永磁</span>        <span class="n">内贸规划</span>        <span class="mi">3</span><span class="n">D打印</span>
<span class="n">页岩气</span>        <span class="n">三网融合</span>        <span class="n">风能概念</span>        <span class="n">金融改革</span>        <span class="n">猪肉</span>            <span class="n">水域改革</span>        <span class="n">风能</span>            <span class="n">赛马概念</span>        <span class="n">社保重仓</span>        <span class="n">物联网</span>
<span class="n">民营医院</span>        <span class="n">黄河三角</span>        <span class="n">固废处理</span>        <span class="n">甲型流感</span>        <span class="n">丝绸之路</span>        <span class="n">融资融券</span>        <span class="n">黄金概念</span>        <span class="n">抗癌</span>            <span class="n">国企改革</span>        <span class="n">碳纤维</span>
<span class="n">保障房</span>        <span class="n">智能电网</span>        <span class="n">石墨烯</span>        <span class="n">空气治理</span>        <span class="n">京津冀</span>        <span class="n">分拆上市</span>        <span class="n">装饰园林</span>        <span class="n">振兴沈阳</span>        <span class="n">智能家居</span>        <span class="n">阿里概念</span>
<span class="n">股期概念</span>        <span class="n">新能源</span>        <span class="n">生物疫苗</span>        <span class="n">特斯拉</span>        <span class="n">国产软件</span>        <span class="n">互联金融</span>        <span class="n">锂电池</span>        <span class="n">保险重仓</span>        <span class="n">粤港澳</span>        <span class="n">自贸区</span>
<span class="n">安防服务</span>        <span class="n">广东自贸</span>        <span class="n">汽车电子</span>        <span class="n">超大盘</span>        <span class="n">低碳经济</span>        <span class="n">云计算</span>        <span class="n">婴童概念</span>        <span class="n">建筑节能</span>        <span class="n">土地流转</span>        <span class="n">智能机器</span>
<span class="n">未股改</span>        <span class="n">触摸屏</span>        <span class="n">天津自贸</span>        <span class="n">生物质能</span>        <span class="n">前海概念</span>        <span class="n">抗流感</span>        <span class="n">卫星导航</span>        <span class="n">多晶硅</span>        <span class="n">出口退税</span>        <span class="n">参股金融</span>
<span class="n">准ST股</span>        <span class="n">食品安全</span>        <span class="n">智能穿戴</span>        <span class="n">业绩预降</span>        <span class="n">污水处理</span>        <span class="n">重组概念</span>        <span class="n">上海自贸</span>        <span class="n">外资背景</span>        <span class="n">信托重仓</span>        <span class="n">本月解禁</span>
<span class="n">体育概念</span>        <span class="n">维生素</span>        <span class="n">基金重仓</span>        <span class="n">充电桩</span>        <span class="n">IPV6概念</span>        <span class="n">资产注入</span>        <span class="n">生态农业</span>        <span class="n">基因概念</span>        <span class="n">图们江</span>        <span class="n">O2O模式</span>
<span class="n">铁路基建</span>        <span class="n">摘帽概念</span>        <span class="n">股权激励</span>        <span class="n">电子支付</span>        <span class="n">机器人概念</span>    <span class="n">油气改革</span>        <span class="n">风沙治理</span>        <span class="n">央企50</span>        <span class="n">水利建设</span>        <span class="n">养老概念</span>
<span class="n">QFII重仓</span>        <span class="n">迪士尼</span>        <span class="n">业绩预升</span>        <span class="n">宽带提速</span>        <span class="n">长株潭</span>        <span class="n">超导概念</span>        <span class="n">网络游戏</span>        <span class="n">含可转债</span>        <span class="mi">4</span><span class="n">G概念</span>        <span class="n">送转潜力</span>
<span class="n">奢侈品</span>        <span class="n">新三板</span>        <span class="n">皖江区域</span>        <span class="n">核电核能</span>        <span class="n">海峡西岸</span>        <span class="n">次新股</span>        <span class="n">高校背景</span>        <span class="n">券商重仓</span>        <span class="n">基因测序</span>        <span class="n">节能</span>
<span class="n">三沙概念</span>        <span class="n">日韩贸易</span>        <span class="n">氢燃料</span>        <span class="n">陕甘宁</span>        <span class="n">文化振兴</span>        <span class="n">民营银行</span>        <span class="n">苹果概念</span>        <span class="n">稀缺资源</span>        <span class="n">基因芯片</span>        <span class="n">循环经济</span>
<span class="n">聚氨酯</span>        <span class="n">金融参股</span>        <span class="n">沿海发展</span>        <span class="n">智能交通</span>        <span class="n">海上丝路</span>        <span class="n">ST板块</span>        <span class="n">涉矿概念</span>        <span class="n">蓝宝石</span>        <span class="n">博彩概念</span>        <span class="n">电商概念</span>
<span class="n">整体上市</span>        <span class="n">草甘膦</span>        <span class="n">创投概念</span>        <span class="n">超级细菌</span>        <span class="n">信息安全</span>        <span class="n">生物燃料</span>        <span class="n">武汉规划</span>        <span class="n">节能环保</span>        <span class="n">成渝特区</span>        <span class="n">军工航天</span>
<span class="n">地热能</span>        <span class="n">上海本地</span>        <span class="n">生物育种</span>        <span class="n">燃料电池</span>        <span class="n">海水淡化</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"><ul class="first simple">
<li>得到一个概念的股票列表:</li>
</ul>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">concept</span><span class="p">(</span><span class="s1">&#39;民营医院&#39;</span><span class="p">)</span>
<span class="c1">#[Out]</span>
<span class="c1">#[&#39;600105.XSHG&#39;,</span>
<span class="c1">#&#39;002550.XSHE&#39;,</span>
<span class="c1">#&#39;002004.XSHE&#39;,</span>
<span class="c1">#&#39;002424.XSHE&#39;,</span>
<span class="c1">#...]</span>
</pre></div>
</td></tr></table></div>
<ul class="simple">
<li>得到某几个概念的股票列表:</li>
</ul>
<div class="last highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">concept</span><span class="p">(</span><span class="s1">&#39;民营医院&#39;</span><span class="p">,</span> <span class="s1">&#39;国企改革&#39;</span><span class="p">)</span>
<span class="c1">#[Out]</span>
<span class="c1">#[&#39;601607.XSHG&#39;,</span>
<span class="c1">#&#39;600748.XSHG&#39;,</span>
<span class="c1">#&#39;600630.XSHG&#39;,</span>
<span class="c1">#...]</span>
</pre></div>
</td></tr></table></div>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="history-bars">
<h3>history_bars - 某一合约历史数据<a class="headerlink" href="#history-bars" title="永久链接至标题">¶</a></h3>
</div>
<div class="section" id="current-snapshot">
<h3>current_snapshot - 当前快照数据<a class="headerlink" href="#current-snapshot" title="永久链接至标题">¶</a></h3>
</div>
<div class="section" id="get-future-contracts">
<h3>get_future_contracts - 期货可交易合约列表<a class="headerlink" href="#get-future-contracts" title="永久链接至标题">¶</a></h3>
</div>
<div class="section" id="get-trading-dates">
<h3>get_trading_dates - 交易日列表<a class="headerlink" href="#get-trading-dates" title="永久链接至标题">¶</a></h3>
</div>
<div class="section" id="get-previous-trading-date">
<h3>get_previous_trading_date - 上一交易日<a class="headerlink" href="#get-previous-trading-date" title="永久链接至标题">¶</a></h3>
</div>
<div class="section" id="get-next-trading-date">
<h3>get_next_trading_date - 下一交易日<a class="headerlink" href="#get-next-trading-date" title="永久链接至标题">¶</a></h3>
</div>
<div class="section" id="get-yield-curve">
<h3>get_yield_curve - 收益率曲线<a class="headerlink" href="#get-yield-curve" title="永久链接至标题">¶</a></h3>
</div>
<div class="section" id="is-suspended">
<h3>is_suspended - 全天停牌判断<a class="headerlink" href="#is-suspended" title="永久链接至标题">¶</a></h3>
</div>
<div class="section" id="is-st-stock-st">
<h3>is_st_stock - ST股判断<a class="headerlink" href="#is-st-stock-st" title="永久链接至标题">¶</a></h3>
</div>
</div>
<div class="section" id="id5">
<h2>其他方法<a class="headerlink" href="#id5" title="永久链接至标题">¶</a></h2>
<div class="section" id="update-universe">
<h3>update_universe<a class="headerlink" href="#update-universe" title="永久链接至标题">¶</a></h3>
</div>
<div class="section" id="subscribe">
<h3>subscribe<a class="headerlink" href="#subscribe" title="永久链接至标题">¶</a></h3>
</div>
<div class="section" id="unsubscribe">
<h3>unsubscribe<a class="headerlink" href="#unsubscribe" title="永久链接至标题">¶</a></h3>
</div>
</div>
<div class="section" id="module-mooquant.core.strategy_context">
<span id="context"></span><h2>Context属性<a class="headerlink" href="#module-mooquant.core.strategy_context" title="永久链接至标题">¶</a></h2>
</div>
<div class="section" id="id6">
<h2>类<a class="headerlink" href="#id6" title="永久链接至标题">¶</a></h2>
<div class="section" id="module-mooquant.model.bar">
<span id="bar"></span><h3>Bar<a class="headerlink" href="#module-mooquant.model.bar" title="永久链接至标题">¶</a></h3>
</div>
<div class="section" id="module-mooquant.model.snapshot">
<span id="snapshot"></span><h3>Snapshot<a class="headerlink" href="#module-mooquant.model.snapshot" title="永久链接至标题">¶</a></h3>
</div>
<div class="section" id="module-mooquant.model.order">
<span id="id7"></span><h3>Order<a class="headerlink" href="#module-mooquant.model.order" title="永久链接至标题">¶</a></h3>
</div>
<div class="section" id="module-mooquant.model.portfolio">
<span id="portfolio"></span><h3>Portfolio<a class="headerlink" href="#module-mooquant.model.portfolio" title="永久链接至标题">¶</a></h3>
</div>
<div class="section" id="module-mooquant.mod.mooquant_mod_sys_accounts.account_model.stock_account">
<span id="stockaccount"></span><h3>StockAccount<a class="headerlink" href="#module-mooquant.mod.mooquant_mod_sys_accounts.account_model.stock_account" title="永久链接至标题">¶</a></h3>
</div>
<div class="section" id="module-mooquant.mod.mooquant_mod_sys_accounts.account_model.future_account">
<span id="futureaccount"></span><h3>FutureAccount<a class="headerlink" href="#module-mooquant.mod.mooquant_mod_sys_accounts.account_model.future_account" title="永久链接至标题">¶</a></h3>
</div>
<div class="section" id="module-mooquant.mod.mooquant_mod_sys_accounts.position_model.stock_position">
<span id="stockposition"></span><h3>StockPosition<a class="headerlink" href="#module-mooquant.mod.mooquant_mod_sys_accounts.position_model.stock_position" title="永久链接至标题">¶</a></h3>
</div>
<div class="section" id="module-mooquant.mod.mooquant_mod_sys_accounts.position_model.future_position">
<span id="futureposition"></span><h3>FuturePosition<a class="headerlink" href="#module-mooquant.mod.mooquant_mod_sys_accounts.position_model.future_position" title="永久链接至标题">¶</a></h3>
</div>
<div class="section" id="module-mooquant.model">
<span id="instrument"></span><h3>Instrument<a class="headerlink" href="#module-mooquant.model" title="永久链接至标题">¶</a></h3>
<dl class="class">
<dt id="mooquant.model.Instrument">
<em class="property">class </em><code class="descclassname">mooquant.model.</code><code class="descname">Instrument</code><a class="headerlink" href="#mooquant.model.Instrument" title="永久链接至目标">¶</a></dt>
<dd><dl class="attribute">
<dt id="mooquant.model.Instrument.order_book_id">
<code class="descname">order_book_id</code><a class="headerlink" href="#mooquant.model.Instrument.order_book_id" title="永久链接至目标">¶</a></dt>
<dd><p>【str】股票：证券代码，证券的独特的标识符。应以’.XSHG’或’.XSHE’结尾，前者代表上证，后者代表深证。期货：期货代码，期货的独特的标识符（郑商所期货合约数字部分进行了补齐。例如原有代码’ZC609’补齐之后变为’ZC1609’）。主力连续合约UnderlyingSymbol+88，例如’IF88’ ；指数连续合约命名规则为UnderlyingSymbol+99</p>
</dd></dl>

<dl class="attribute">
<dt id="mooquant.model.Instrument.symbol">
<code class="descname">symbol</code><a class="headerlink" href="#mooquant.model.Instrument.symbol" title="永久链接至目标">¶</a></dt>
<dd><p>【str】股票：证券的简称，例如’平安银行’。期货：期货的简称，例如’沪深1005’。</p>
</dd></dl>

<dl class="attribute">
<dt id="mooquant.model.Instrument.abbrev_symbol">
<code class="descname">abbrev_symbol</code><a class="headerlink" href="#mooquant.model.Instrument.abbrev_symbol" title="永久链接至目标">¶</a></dt>
<dd><p>【str】证券的名称缩写，在中国A股就是股票的拼音缩写，例如：’PAYH’就是平安银行股票的证券名缩写；在期货市场中例如’HS1005’，主力连续合约与指数连续合约都为’null’。</p>
</dd></dl>

<dl class="attribute">
<dt id="mooquant.model.Instrument.round_lot">
<code class="descname">round_lot</code><a class="headerlink" href="#mooquant.model.Instrument.round_lot" title="永久链接至目标">¶</a></dt>
<dd><p>【int】股票：一手对应多少股，中国A股一手是100股。期货：一律为1。</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">sector_code（股票专用）</code></dt>
<dd><p>【str】板块缩写代码，全球通用标准定义</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">sector_code_name（股票专用）</code></dt>
<dd><p>【str】以当地语言为标准的板块代码名</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">industry_code（股票专用）</code></dt>
<dd><p>【str】国民经济行业分类代码，具体可参考下方“Industry列表”</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">industry_name（股票专用）</code></dt>
<dd><p>【str】国民经济行业分类名称</p>
</dd></dl>

<dl class="attribute">
<dt id="mooquant.model.Instrument.listed_date">
<code class="descname">listed_date</code><a class="headerlink" href="#mooquant.model.Instrument.listed_date" title="永久链接至目标">¶</a></dt>
<dd><p>【str】股票：该证券上市日期。期货：期货的上市日期，主力连续合约与指数连续合约都为‘0000-00-00’。</p>
</dd></dl>

<dl class="attribute">
<dt id="mooquant.model.Instrument.de_listed_date">
<code class="descname">de_listed_date</code><a class="headerlink" href="#mooquant.model.Instrument.de_listed_date" title="永久链接至目标">¶</a></dt>
<dd><p>【str】股票：退市日期。期货：交割日期。</p>
</dd></dl>

<dl class="attribute">
<dt id="mooquant.model.Instrument.type">
<code class="descname">type</code><a class="headerlink" href="#mooquant.model.Instrument.type" title="永久链接至目标">¶</a></dt>
<dd><p>【str】合约类型，目前支持的类型有: ‘CS’, ‘INDX’, ‘LOF’, ‘ETF’, ‘FenjiMu’, ‘FenjiA’, ‘FenjiB’, ‘Future’</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">concept_names（股票专用）</code></dt>
<dd><p>【str】概念股分类，例如：’铁路基建’，’基金重仓’等</p>
</dd></dl>

<dl class="attribute">
<dt id="mooquant.model.Instrument.exchange">
<code class="descname">exchange</code><a class="headerlink" href="#mooquant.model.Instrument.exchange" title="永久链接至目标">¶</a></dt>
<dd><p>【str】交易所。股票：’XSHE’ - 深交所, ‘XSHG’ - 上交所。期货：’DCE’ - 大连商品交易所, ‘SHFE’ - 上海期货交易所，’CFFEX’ - 中国金融期货交易所, ‘CZCE’- 郑州商品交易所</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">board_type（股票专用）</code></dt>
<dd><p>【str】板块类别，’MainBoard’ - 主板,’GEM’ - 创业板</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">status（股票专用）</code></dt>
<dd><p>【str】合约状态。’Active’ - 正常上市, ‘Delisted’ - 终止上市, ‘TemporarySuspended’ - 暂停上市, ‘PreIPO’ - 发行配售期间, ‘FailIPO’ - 发行失败</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">special_type（股票专用）</code></dt>
<dd><p>【str】特别处理状态。’Normal’ - 正常上市, ‘ST’ - ST处理, ‘StarST’ - *ST代表该股票正在接受退市警告, ‘PT’ - 代表该股票连续3年收入为负，将被暂停交易, ‘Other’ - 其他</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">contract_multiplier（期货专用）</code></dt>
<dd><p>【float】合约乘数，例如沪深300股指期货的乘数为300.0</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">underlying_order_book_id（期货专用）</code></dt>
<dd><p>【str】合约标的代码，目前除股指期货(IH, IF, IC)之外的期货合约，这一字段全部为’null’</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">underlying_symbol（期货专用）</code></dt>
<dd><p>【str】合约标的名称，例如IF1005的合约标的名称为’IF’</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">maturity_date（期货专用）</code></dt>
<dd><p>【str】期货到期日。主力连续合约与指数连续合约都为‘0000-00-00’</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">settlement_method（期货专用）</code></dt>
<dd><p>【str】交割方式，’CashSettlementRequired’ - 现金交割, ‘PhysicalSettlementRequired’ - 实物交割</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">product（期货专用）</code></dt>
<dd><p>【str】产品类型，’Index’ - 股指期货, ‘Commodity’ - 商品期货, ‘Government’ - 国债期货</p>
</dd></dl>

</dd></dl>

<p>Instrument对象也支持如下方法：</p>
<p>合约已上市天数：</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">instruments</span><span class="p">(</span><span class="n">order_book_id</span><span class="p">)</span><span class="o">.</span><span class="n">days_from_listed</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
<p>如果合约首次上市交易，天数为0；如果合约尚未上市或已经退市，则天数值为-1</p>
<p>合约距离到期天数。:</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">instruments</span><span class="p">(</span><span class="n">order_book_id</span><span class="p">)</span><span class="o">.</span><span class="n">days_to_expire</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
<p>如果策略已经退市，则天数值为-1</p>
</div>
</div>
<div class="section" id="id8">
<h2>枚举常量<a class="headerlink" href="#id8" title="永久链接至标题">¶</a></h2>
<div class="section" id="order-status">
<h3>ORDER_STATUS - 订单状态<a class="headerlink" href="#order-status" title="永久链接至标题">¶</a></h3>
<dl class="class">
<dt id="mooquant.model.ORDER_STATUS">
<em class="property">class </em><code class="descclassname">mooquant.model.</code><code class="descname">ORDER_STATUS</code><a class="headerlink" href="#mooquant.model.ORDER_STATUS" title="永久链接至目标">¶</a></dt>
<dd><dl class="attribute">
<dt id="mooquant.model.ORDER_STATUS.PENDING_NEW">
<code class="descname">PENDING_NEW</code><a class="headerlink" href="#mooquant.model.ORDER_STATUS.PENDING_NEW" title="永久链接至目标">¶</a></dt>
<dd><p>待报</p>
</dd></dl>

<dl class="attribute">
<dt id="mooquant.model.ORDER_STATUS.ACTIVE">
<code class="descname">ACTIVE</code><a class="headerlink" href="#mooquant.model.ORDER_STATUS.ACTIVE" title="永久链接至目标">¶</a></dt>
<dd><p>可撤</p>
</dd></dl>

<dl class="attribute">
<dt id="mooquant.model.ORDER_STATUS.FILLED">
<code class="descname">FILLED</code><a class="headerlink" href="#mooquant.model.ORDER_STATUS.FILLED" title="永久链接至目标">¶</a></dt>
<dd><p>全成</p>
</dd></dl>

<dl class="attribute">
<dt id="mooquant.model.ORDER_STATUS.CANCELLED">
<code class="descname">CANCELLED</code><a class="headerlink" href="#mooquant.model.ORDER_STATUS.CANCELLED" title="永久链接至目标">¶</a></dt>
<dd><p>已撤</p>
</dd></dl>

<dl class="attribute">
<dt id="mooquant.model.ORDER_STATUS.REJECTED">
<code class="descname">REJECTED</code><a class="headerlink" href="#mooquant.model.ORDER_STATUS.REJECTED" title="永久链接至目标">¶</a></dt>
<dd><p>拒单</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="side">
<h3>SIDE - 买卖方向<a class="headerlink" href="#side" title="永久链接至标题">¶</a></h3>
<dl class="class">
<dt id="mooquant.model.SIDE">
<em class="property">class </em><code class="descclassname">mooquant.model.</code><code class="descname">SIDE</code><a class="headerlink" href="#mooquant.model.SIDE" title="永久链接至目标">¶</a></dt>
<dd><dl class="attribute">
<dt id="mooquant.model.SIDE.BUY">
<code class="descname">BUY</code><a class="headerlink" href="#mooquant.model.SIDE.BUY" title="永久链接至目标">¶</a></dt>
<dd><p>买</p>
</dd></dl>

<dl class="attribute">
<dt id="mooquant.model.SIDE.SELL">
<code class="descname">SELL</code><a class="headerlink" href="#mooquant.model.SIDE.SELL" title="永久链接至目标">¶</a></dt>
<dd><p>卖</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="position-effect">
<h3>POSITION_EFFECT - 开平<a class="headerlink" href="#position-effect" title="永久链接至标题">¶</a></h3>
<dl class="class">
<dt id="mooquant.model.POSITION_EFFECT">
<em class="property">class </em><code class="descclassname">mooquant.model.</code><code class="descname">POSITION_EFFECT</code><a class="headerlink" href="#mooquant.model.POSITION_EFFECT" title="永久链接至目标">¶</a></dt>
<dd><dl class="attribute">
<dt id="mooquant.model.POSITION_EFFECT.OPEN">
<code class="descname">OPEN</code><a class="headerlink" href="#mooquant.model.POSITION_EFFECT.OPEN" title="永久链接至目标">¶</a></dt>
<dd><p>开仓</p>
</dd></dl>

<dl class="attribute">
<dt id="mooquant.model.POSITION_EFFECT.CLOSE">
<code class="descname">CLOSE</code><a class="headerlink" href="#mooquant.model.POSITION_EFFECT.CLOSE" title="永久链接至目标">¶</a></dt>
<dd><p>平仓</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="order-type">
<h3>ORDER_TYPE - 订单类型<a class="headerlink" href="#order-type" title="永久链接至标题">¶</a></h3>
<dl class="class">
<dt id="mooquant.model.ORDER_TYPE">
<em class="property">class </em><code class="descclassname">mooquant.model.</code><code class="descname">ORDER_TYPE</code><a class="headerlink" href="#mooquant.model.ORDER_TYPE" title="永久链接至目标">¶</a></dt>
<dd><dl class="attribute">
<dt id="mooquant.model.ORDER_TYPE.MARKET">
<code class="descname">MARKET</code><a class="headerlink" href="#mooquant.model.ORDER_TYPE.MARKET" title="永久链接至目标">¶</a></dt>
<dd><p>市价单</p>
</dd></dl>

<dl class="attribute">
<dt id="mooquant.model.ORDER_TYPE.LIMIT">
<code class="descname">LIMIT</code><a class="headerlink" href="#mooquant.model.ORDER_TYPE.LIMIT" title="永久链接至目标">¶</a></dt>
<dd><p>限价单</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="run-type">
<h3>RUN_TYPE - 策略运行类型<a class="headerlink" href="#run-type" title="永久链接至标题">¶</a></h3>
<dl class="class">
<dt id="mooquant.model.RUN_TYPE">
<em class="property">class </em><code class="descclassname">mooquant.model.</code><code class="descname">RUN_TYPE</code><a class="headerlink" href="#mooquant.model.RUN_TYPE" title="永久链接至目标">¶</a></dt>
<dd><dl class="attribute">
<dt id="mooquant.model.RUN_TYPE.BACKTEST">
<code class="descname">BACKTEST</code><a class="headerlink" href="#mooquant.model.RUN_TYPE.BACKTEST" title="永久链接至目标">¶</a></dt>
<dd><p>回测</p>
</dd></dl>

<dl class="attribute">
<dt id="mooquant.model.RUN_TYPE.PAPER_TRADING">
<code class="descname">PAPER_TRADING</code><a class="headerlink" href="#mooquant.model.RUN_TYPE.PAPER_TRADING" title="永久链接至目标">¶</a></dt>
<dd><p>实盘模拟</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="matching-type">
<h3>MATCHING_TYPE - 撮合方式<a class="headerlink" href="#matching-type" title="永久链接至标题">¶</a></h3>
<dl class="class">
<dt id="mooquant.model.MATCHING_TYPE">
<em class="property">class </em><code class="descclassname">mooquant.model.</code><code class="descname">MATCHING_TYPE</code><a class="headerlink" href="#mooquant.model.MATCHING_TYPE" title="永久链接至目标">¶</a></dt>
<dd><dl class="attribute">
<dt id="mooquant.model.MATCHING_TYPE.CURRENT_BAR_CLOSE">
<code class="descname">CURRENT_BAR_CLOSE</code><a class="headerlink" href="#mooquant.model.MATCHING_TYPE.CURRENT_BAR_CLOSE" title="永久链接至目标">¶</a></dt>
<dd><p>以当前bar收盘价撮合</p>
</dd></dl>

<dl class="attribute">
<dt id="mooquant.model.MATCHING_TYPE.NEXT_BAR_OPEN">
<code class="descname">NEXT_BAR_OPEN</code><a class="headerlink" href="#mooquant.model.MATCHING_TYPE.NEXT_BAR_OPEN" title="永久链接至目标">¶</a></dt>
<dd><p>以下一bar数据开盘价撮合</p>
</dd></dl>

</dd></dl>

</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="extend_api.html" class="btn btn-neutral float-right" title="扩展 API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../intro/detail_install.html" class="btn btn-neutral" title="环境搭建" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, MooQuant.
      最后更新于 9月 13, 2017.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.2.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 
<script type="text/javascript">
    console.log("Powered By MooQuant.");
</script>


</body>
</html>